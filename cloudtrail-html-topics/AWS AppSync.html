<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   Logging AWS AppSync API calls using AWS CloudTrail - AWS AppSync GraphQL
  </title>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="/assets" name="assets_root"/>
  <meta content="cloudtrail-logging" name="target_state"/>
  <meta content="cloudtrail-logging" name="default_state"/>
  <link href="/assets/images/favicon.ico" rel="icon" type="image/ico"/>
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico"/>
  <link href="https://docs.aws.amazon.com/appsync/latest/devguide/cloudtrail-logging.html" rel="canonical"/>
  <meta content="Learn about integrating AWS AppSync with CloudTrail." name="description"/>
  <meta content="IAD" name="deployment_region"/>
  <meta content="AWS AppSync GraphQL" name="product"/>
  <meta content="Developer Guide" name="guide"/>
  <meta content="en_us" name="guide-locale"/>
  <meta content="toc-contents.json" name="tocs"/>
  <link href="https://docs.aws.amazon.com/appsync/latest/devguide/cloudtrail-logging.html" rel="canonical"/>
  <link href="https://docs.aws.amazon.com/id_id/appsync/latest/devguide/cloudtrail-logging.html" hreflang="id-id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/id_id/appsync/latest/devguide/cloudtrail-logging.html" hreflang="id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/appsync/latest/devguide/cloudtrail-logging.html" hreflang="de-de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/appsync/latest/devguide/cloudtrail-logging.html" hreflang="de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/appsync/latest/devguide/cloudtrail-logging.html" hreflang="en-us" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/appsync/latest/devguide/cloudtrail-logging.html" hreflang="en" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/appsync/latest/devguide/cloudtrail-logging.html" hreflang="es-es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/appsync/latest/devguide/cloudtrail-logging.html" hreflang="es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/appsync/latest/devguide/cloudtrail-logging.html" hreflang="fr-fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/appsync/latest/devguide/cloudtrail-logging.html" hreflang="fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/appsync/latest/devguide/cloudtrail-logging.html" hreflang="it-it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/appsync/latest/devguide/cloudtrail-logging.html" hreflang="it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/cloudtrail-logging.html" hreflang="ja-jp" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/cloudtrail-logging.html" hreflang="ja" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/appsync/latest/devguide/cloudtrail-logging.html" hreflang="ko-kr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/appsync/latest/devguide/cloudtrail-logging.html" hreflang="ko" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/appsync/latest/devguide/cloudtrail-logging.html" hreflang="pt-br" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/appsync/latest/devguide/cloudtrail-logging.html" hreflang="pt" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_cn/appsync/latest/devguide/cloudtrail-logging.html" hreflang="zh-cn" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_tw/appsync/latest/devguide/cloudtrail-logging.html" hreflang="zh-tw" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/appsync/latest/devguide/cloudtrail-logging.html" hreflang="x-default" rel="alternative"/>
  <meta content="AppSync" name="feedback-item"/>
  <meta content="AWS AppSync GraphQL" name="this_doc_product"/>
  <meta content="Developer Guide" name="this_doc_guide"/>
  <script defer="" src="/assets/r/vendor4.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor3.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor1.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02">
  </script>
  <link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet"/>
  <script async="" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'appsync'}" id="awsc-panorama-bundle" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" type="text/javascript">
  </script>
  <meta id="panorama-serviceSubSection" value="Developer Guide"/>
  <meta id="panorama-serviceConsolePage" value="Logging AWS AppSync API calls using AWS CloudTrail"/>
 </head>
 <body class="awsdocs awsui">
  <div class="awsdocs-container">
   <awsdocs-header>
   </awsdocs-header>
   <awsui-app-layout class="awsui-util-no-gutters" header-selector="awsdocs-header" id="app-layout" navigation-change="$ctrl.onNavChange($event)" navigation-hide="false" navigation-open="$ctrl.navOpen" navigation-width="$ctrl.navWidth" ng-controller="ContentController as $ctrl" tools-change="$ctrl.onToolsChange($event)" tools-hide="$ctrl.hideTools" tools-open="$ctrl.toolsOpen" tools-width="$ctrl.toolsWidth">
    <div dom-region="navigation" id="guide-toc">
     <awsdocs-toc>
     </awsdocs-toc>
    </div>
    <div dom-region="content" id="main-column" tabindex="-1">
     <awsdocs-view class="awsdocs-view">
      <div id="awsdocs-content">
       <head>
        <title>
         Logging AWS AppSync API calls using AWS CloudTrail - AWS AppSync GraphQL
        </title>
        <meta content="/pdfs/appsync/latest/devguide/appsync-dg.pdf#cloudtrail-logging" name="pdf"/>
        <meta content="https://repost.aws/tags/TA-rppqfLWSMyo15gvoFCr5A" name="forums"/>
        <meta content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AppSync&amp;topic_url=https://docs.aws.amazon.com/en_us/appsync/latest/devguide/cloudtrail-logging.html" name="feedback"/>
        <meta content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/appsync/latest/devguide/cloudtrail-logging.html" name="feedback-yes"/>
        <meta content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/appsync/latest/devguide/cloudtrail-logging.html" name="feedback-no"/>
        <script type="application/ld+json">
         {
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS AppSync",
        "item" : "https://docs.aws.amazon.com/appsync/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/appsync/latest/devguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Configuration and settings in AWS AppSync",
        "item" : "https://docs.aws.amazon.com/appsync/latest/devguide/configuration-and-settings.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Logging AWS AppSync API calls using AWS CloudTrail",
        "item" : "https://docs.aws.amazon.com/appsync/latest/devguide/configuration-and-settings.html"
      }
    ]
}
        </script>
       </head>
       <body>
        <div id="main">
         <div style="display: none">
          <a href="/pdfs/appsync/latest/devguide/appsync-dg.pdf#cloudtrail-logging" rel="noopener noreferrer" target="_blank" title="Open PDF">
          </a>
         </div>
         <div class="breadcrumb" id="breadcrumbs">
          <a href="https://aws.amazon.com">
           AWS
          </a>
          <a href="/index.html">
           Documentation
          </a>
          <a href="/appsync/index.html">
           AWS AppSync
          </a>
          <a href="what-is-appsync.html">
           Developer Guide
          </a>
         </div>
         <div id="page-toc-src">
          <a href="#aws-appsync-information-in-cloudtrail">
           AWS AppSync information in CloudTrail
          </a>
          <a href="#cloudtrail-data-events">
           AWS AppSync data events in CloudTrail
          </a>
          <a href="#understanding-your-service-name-entries">
           Understanding AWS AppSync log file
        entries
          </a>
         </div>
         <div class="awsui-util-container" id="main-content">
          <div id="main-col-body">
           <awsdocs-language-banner data-service="$ctrl.pageService">
           </awsdocs-language-banner>
           <h1 class="topictitle" id="cloudtrail-logging">
            Logging AWS AppSync API calls using AWS CloudTrail
           </h1>
           <div class="awsdocs-page-header-container">
            <awsdocs-page-header>
            </awsdocs-page-header>
            <awsdocs-filter-selector id="awsdocs-filter-selector">
            </awsdocs-filter-selector>
           </div>
           <p>
            AWS AppSync is integrated with AWS CloudTrail, a service that provides a record of actions taken by a
    user, role, or AWS service in AWS AppSync. CloudTrail captures all API calls for AWS AppSync as events. The
    calls captured include calls from the AWS AppSync console and from code calls to the AWS AppSync APIs. You
    can use the information collected by CloudTrail to determine the request that was made to AWS AppSync, the
    IP address of the requester, who made the request, when the request was made, and additional
    details.
           </p>
           <p>
            You can create a
            <em>
             trail
            </em>
            to enable continuous delivery of CloudTrail events to
    an Amazon Simple Storage Service (Amazon S3) bucket, including events for AWS AppSync. If you don't configure a trail, you can
    still view the most recent events in the CloudTrail console.
           </p>
           <p>
            For more information about CloudTrail, see the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-user-guide.html">
             AWS CloudTrail User Guide
            </a>
            .
           </p>
           <h2 id="aws-appsync-information-in-cloudtrail">
            AWS AppSync information in CloudTrail
           </h2>
           <p>
            CloudTrail is enabled on your AWS account when you create the account. In the CloudTrail console in
            <b>
             Event history
            </b>
            , you can view, search, and download recent events in your
      AWS account. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/view-cloudtrail-events.html">
             Viewing Events with CloudTrail
        Event History
            </a>
            in the
            <em>
             AWS CloudTrail User Guide
            </em>
            .
           </p>
           <p>
            For an ongoing record of events in your AWS account, including events for AWS AppSync, create
      a trail. By default, when you create a trail in the console, the trail applies to all AWS
      Regions. The trail logs events from all Regions in the AWS partition and delivers the log
      files to the Amazon S3 bucket that you specify. Additionally, you can configure other AWS
      services to further analyze and act upon the event data collected in CloudTrail logs. For more
      information, see the following in the
            <em>
             AWS CloudTrail User Guide
            </em>
            :
           </p>
           <div class="itemizedlist">
            <ul class="itemizedlist">
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-and-update-a-trail.html">
                Creating
            a Trail For Your AWS Account
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-aws-service-specific-topics.html#cloudtrail-aws-service-specific-topics-integrations">
                AWS Service Integrations With CloudTrail Logs
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/getting_notifications_top_level.html">
                Configuring
            Amazon SNS Notifications for CloudTrail
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/receive-cloudtrail-log-files-from-multiple-regions.html">
                Receiving CloudTrail Log Files from Multiple Regions
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-receive-logs-from-multiple-accounts.html">
                Receiving CloudTrail Log Files from Multiple Accounts
               </a>
              </p>
             </li>
            </ul>
           </div>
           <p>
            CloudTrail logs all AWS AppSync API operations. For example, calls to the
            <code class="code">
             CreateGraphqlApi
            </code>
            ,
            <code class="code">
             CreateDataSource
            </code>
            , and
            <code class="code">
             ListResolvers
            </code>
            APIs generate entries in the CloudTrail log files. These and other operations are documented in the
            <a href="https://docs.aws.amazon.com/appsync/latest/APIReference/Welcome.html">
             AWS AppSync API Reference
            </a>
            .
           </p>
           <p>
            Every event or log entry contains information about who generated the request. The
      identity information helps you determine:
           </p>
           <div class="itemizedlist">
            <ul class="itemizedlist">
             <li class="listitem">
              <p>
               Whether the request was made with root or AWS Identity and Access Management (IAM) user credentials.
              </p>
             </li>
             <li class="listitem">
              <p>
               Whether the request was made with temporary security credentials for a role or
          federated user.
              </p>
             </li>
             <li class="listitem">
              <p>
               Whether the request was made by another AWS service.
              </p>
             </li>
            </ul>
           </div>
           <p>
            For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-event-reference-user-identity.html">
             CloudTrail userIdentity Element
            </a>
            in the
            <em>
             AWS CloudTrail User Guide
            </em>
            .
           </p>
           <h2 id="cloudtrail-data-events">
            AWS AppSync data events in CloudTrail
           </h2>
           <p>
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/logging-data-events-with-cloudtrail.html#logging-data-events">
             Data events
            </a>
            provide information about the resource operations performed on or in a
      resource (for example, reading or writing to an Amazon S3
      object). These are also known as data
      plane operations. Data events are often high-volume activities. By default, CloudTrail doesnât log
      data events. The CloudTrail
            <b>
             Event history
            </b>
            doesn't record data events.
           </p>
           <p>
            Additional charges apply for data events. For more information about CloudTrail pricing, see
            <a href="https://aws.amazon.com/cloudtrail/pricing/" rel="noopener noreferrer" target="_blank">
             <span>
              AWS CloudTrail Pricing
             </span>
             <awsui-icon class="awsdocs-link-icon" name="external">
             </awsui-icon>
            </a>
            .
           </p>
           <p>
            You can log data events for the
            <code class="code">
             AWS::AppSync::GraphQL
            </code>
            resource type by using
      the CloudTrail console, AWS CLI, or CloudTrail API operations (these include query, mutation, and
      subscription operations, connect operations to your real-time WebSocket endpoint, but not
      messages sent over your real-time WebSocket endpoint.) For more information about how to log
      data events, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/logging-data-events-with-cloudtrail.html#logging-data-events-console">
             Logging data events with the AWS Management Console
            </a>
            and
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/logging-data-events-with-cloudtrail.html#creating-data-event-selectors-with-the-AWS-CLI">
             Logging data events with the AWS Command Line Interface
            </a>
            in the
            <em>
             AWS CloudTrail User Guide
            </em>
            .
           </p>
           <p>
            The following table lists the AWS AppSync resource type for which you can log data events. The
            <b>
             Data event type (console)
            </b>
            column shows the value to choose
      from the
            <b>
             Data event type
            </b>
            list in the CloudTrail console. The
            <b>
             resources.type value
            </b>
            column shows the
            <code class="code">
             resources.type
            </code>
            value, which you would specify when configuring advanced event selectors using the AWS CLI or
      CloudTrail APIs. The
            <b>
             Data APIs logged to CloudTrail
            </b>
            column shows the API
      calls logged to CloudTrail for the resource type.
           </p>
           <div class="table-container" id="data-events-table">
            <div class="table-contents disable-scroll">
             <table id="w379aac19c22c11c11">
              <thead>
               <tr>
                <th>
                 Data event type (console)
                </th>
                <th>
                 resources.type value
                </th>
                <th>
                 Data APIs logged to CloudTrail
                </th>
               </tr>
              </thead>
              <tr>
               <td tabindex="-1">
                <b>
                 AppSync GraphQL
                </b>
               </td>
               <td tabindex="-1">
                <code class="code">
                 AWS::AppSync::GraphQL
                </code>
               </td>
               <td tabindex="-1">
                <p>
                 <a href="https://docs.aws.amazon.com/appsync/latest/APIReference/API_GraphqlApi.html">
                  GraphQL
                 </a>
                </p>
               </td>
              </tr>
             </table>
            </div>
           </div>
           <p>
            You can configure advanced event selectors to filter on the
            <code class="code">
             eventName
            </code>
            ,
            <code class="code">
             readOnly
            </code>
            , and
            <code class="code">
             resources.ARN
            </code>
            fields to log only those events that
      are important to you. For more information about these fields, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/APIReference/API_AdvancedFieldSelector.html">
             AdvancedFieldSelector
            </a>
            in the
            <em>
             AWS CloudTrail API Reference
            </em>
            .
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class="">[
  <span>{</span>
    "name": "Only 1 AppSync API",
    "fieldSelectors": [
      <span>{</span>
        "field": "eventCategory",
        "equals": [
          "Data"
        ]
      },
      <span>{</span>
        "field": "resources.type",
        "equals": [
          "AWS::AppSync::GraphQL"
        ]
      },
      <span>{</span>
        "field": "resources.ARN",
        "equals": [
          "arn:aws:appsync:us-east-1:111122223333:apis/YourGraphQLApiId"
        ]
      }
    ]
  }
]</code></pre>
           <h2 id="understanding-your-service-name-entries">
            Understanding AWS AppSync log file
        entries
           </h2>
           <p>
            CloudTrail delivers events as log files that contain one or more log entries. An event
      represents a single request from any source and includes information about the requested
      operation, the date and time of the operation, the request parameters, and so on. Because
      these log files aren't an ordered stack trace of the public API calls, they don't appear in
      any specific order.
           </p>
           <p>
            The following example CloudTrail log entry demonstrates the
            <code class="code">
             CreateApiKey
            </code>
            operation.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (default)--><code class="default"><span>{</span>
  "Records": [<span>{</span>
    "eventVersion": "1.05",
    "userIdentity": <span>{</span>
      "type": "IAMUser",
      "principalId": "A1B2C3D4E5F6G7EXAMPLE",
      "arn": "arn:aws:iam::111122223333:user/Alice",
      "accountId": "111122223333",
      "accessKeyId": "AKIAIOSFODNN7EXAMPLE",
      "userName": "diego_ramirez"
    },
    "eventTime": "2018-01-31T21:49:09Z",
    "eventSource": "appsync.amazonaws.com",
    "eventName": "CreateApiKey",
    "awsRegion": "us-west-2",
    "sourceIPAddress": "192.2.0.1",
    "userAgent": "aws-cli/1.11.72 Python/2.7.11 Darwin/16.7.0 botocore/1.5.35",
    "requestParameters": <span>{</span>
      "apiId": "a1b2c3d4e5f6g7h8i9jexample"
    },
    "responseElements": <span>{</span>
      "apiKey": <span>{</span>
      "id": "***",
      "expires": 1518037200000
      }
    },
    "requestID": "99999999-9999-9999-9999-999999999999",
    "eventID": "99999999-9999-9999-9999-999999999999",
    "readOnly": false,
    "eventType": "AwsApiCall",
    "recipientAccountId": "111122223333"
    }
  ]
}</code></pre>
           <p>
            The following example CloudTrail log entry demonstrates the
            <code class="code">
             ListApiKeys
            </code>
            operation.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (default)--><code class="default"><span>{</span>
  "Records": [<span>{</span>
    "eventVersion": "1.05",
    "userIdentity": <span>{</span>
      "type": "IAMUser",
      "principalId": "A1B2C3D4E5F6G7EXAMPLE",
      "arn": "arn:aws:iam::111122223333:user/diego_ramirez",
      "accountId": "111122223333",
      "accessKeyId": "AKIAIOSFODNN7EXAMPLE",
      "userName": "diego_ramirez"
    },
    "eventTime": "2018-01-31T21:49:09Z",
    "eventSource": "appsync.amazonaws.com",
    "eventName": "ListApiKeys",
    "awsRegion": "us-west-2",
    "sourceIPAddress": "192.2.0.1",
    "userAgent": "aws-cli/1.11.72 Python/2.7.11 Darwin/16.7.0 botocore/1.5.35",
    "requestParameters": <span>{</span>
      "apiId": "a1b2c3d4e5f6g7h8i9jexample"
    },
    "responseElements": <span>{</span>
      "apiKeys": [
              <span>{</span>
                    "id": "***",
                    "expires": 1517954400000
              },
              <span>{</span>
                    "id": "***",
                    "expires": 1518037200000
              },
            ]
    },
    "requestID": "99999999-9999-9999-9999-999999999999",
    "eventID": "99999999-9999-9999-9999-999999999999",
    "readOnly": false,
    "eventType": "AwsApiCall",
    "recipientAccountId": "111122223333"
    }
  ]
}</code></pre>
           <p>
            The following example CloudTrail log entry demonstrates the
            <code class="code">
             DeleteApiKey
            </code>
            operation.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (default)--><code class="default"><span>{</span>
  "Records": [<span>{</span>
    "eventVersion": "1.05",
    "userIdentity": <span>{</span>
      "type": "IAMUser",
      "principalId": "A1B2C3D4E5F6G7EXAMPLE",
      "arn": "arn:aws:iam::111122223333:user/diego_ramirez",
      "accountId": "111122223333",
      "accessKeyId": "AKIAIOSFODNN7EXAMPLE",
      "userName": "diego_ramirez"
    },
    "eventTime": "2018-01-31T21:49:09Z",
    "eventSource": "appsync.amazonaws.com",
    "eventName": "DeleteApiKey",
    "awsRegion": "us-west-2",
    "sourceIPAddress": "192.2.0.1",
    "userAgent": "aws-cli/1.11.72 Python/2.7.11 Darwin/16.7.0 botocore/1.5.35",
    "requestParameters": <span>{</span>
      "id": "***",
      "apiId": "a1b2c3d4e5f6g7h8i9jexample"
    },
    "responseElements": null,
    "requestID": "99999999-9999-9999-9999-999999999999",
    "eventID": "99999999-9999-9999-9999-999999999999",
    "readOnly": false,
    "eventType": "AwsApiCall",
    "recipientAccountId": "111122223333"
    }
  ]
}</code></pre>
           <p>
            The following example CloudTrail log entry demonstrates a successful GraphQL mutation authorized with a custom Lambda function authorizer.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class=""><span>{</span>
  "eventVersion": "1.10",
    "userIdentity": <span>{</span>
      "type": "Unknown"
    },
    "eventTime": "2024-11-06T15:42:30Z",
    "eventSource": "appsync.amazonaws.com",
    "eventName": "GraphQL",
    "awsRegion": "us-west-2",
    "sourceIPAddress": "15.248.1.214",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:131.0) Gecko/20100101 Firefox/131.0",
    "requestParameters": null,
    "responseElements": null,
    "additionalEventData": <span>{</span>
      "operationName": "MyMutation",
      "authType": [
        "AWS_LAMBDA"
      ],
      "fieldAuthorizationResults": <span>{</span>
        "deniedFields": []
      }
    },
    "requestID": "c2d3768b-3446-40a1-bd95-8399fe776f96",
    "eventID": "21568be1-a1a8-4f43-b978-63cb4cc02a96",
    "readOnly": false,
    "resources": [
    <span>{</span>
      "accountId": "123456789012",
      "type": "AWS::AppSync::GraphQLApi",
      "ARN": "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u"
    }
    ],
    "eventType": "AwsApiCall",
    "managementEvent": false,
    "recipientAccountId": "123456789012",
    "eventCategory": "Data"
}</code></pre>
           <p>
            The following example CloudTrail log entry demonstrates a partially successful GraphQL operation authorized with a custom Lambda function authorizer. Note the
            <code class="code">
             fieldAuthorizationResults.deniedFields
            </code>
            property that specifies the denied fields.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class=""><span>{</span>
  "eventVersion": "1.10",
  "userIdentity": <span>{</span>
    "type": "Unknown"
  },
  "eventTime": "2024-11-06T16:11:49Z",
  "eventSource": "appsync.amazonaws.com",
  "eventName": "GraphQL",
  "awsRegion": "us-west-2",
  "sourceIPAddress": "15.248.1.214",
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:131.0) Gecko/20100101 Firefox/131.0",
  "requestParameters": null,
  "responseElements": null,
  "additionalEventData": <span>{</span>
    "operationName": "MyMutation",
    "authType": [
      "AWS_LAMBDA"
    ],
    "fieldAuthorizationResults": <span>{</span>
      "deniedFields": [
        "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u/types/Mutation/fields/createPost",
        "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u/types/Subscription/fields/onCreatePost",
        "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u/types/Post/fields/status"
      ]
    }
  },
  "requestID": "ae817c4c-66ba-4f64-92a5-ba9c9c341dcd",
  "eventID": "30109698-7605-476a-9dff-b7ed78d134dc",
  "readOnly": false,
  "resources": [
    <span>{</span>
      "accountId": "123456789012",
      "type": "AWS::AppSync::GraphQLApi",
      "ARN": "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u"
    }
  ],
  "eventType": "AwsApiCall",
  "managementEvent": false,
  "recipientAccountId": "123456789012",
  "eventCategory": "Data"
}</code></pre>
           <p>
            The following example CloudTrail log entry demonstrates a failed GraphQL operation.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class=""><span>{</span>
  "eventVersion": "1.10",
  "userIdentity": <span>{</span>
    "type": "Unknown"
  },
  "eventTime": "2024-11-06T15:51:11Z",
  "eventSource": "appsync.amazonaws.com",
  "eventName": "GraphQL",
  "awsRegion": "us-west-2",
  "sourceIPAddress": "15.248.1.214",
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:131.0) Gecko/20100101 Firefox/131.0",
  "errorCode": "AccessDenied",
  "errorMessage": "<span>{</span>\n \"errors\" : [ <span>{</span>\n \"errorType\" : \"UnauthorizedException\",\n \"message\" : \"You are not authorized to make this call.\"\n } ]\n}",
  "requestParameters": null,
  "responseElements": null,
  "additionalEventData": <span>{</span>
    "operationName": "MyFullyDeniedLambdaMutation"
  },
  "requestID": "0bef3cf3-a48b-4de9-8b1f-038afb563516",
  "eventID": "b738651f-4ec0-4548-8fec-200c6b42842b",
  "readOnly": false,
  "resources": [
    <span>{</span>
      "accountId": "123456789012",
      "type": "AWS::AppSync::GraphQLApi",
      "ARN": "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u"
    }
  ],
  "eventType": "AwsApiCall",
  "managementEvent": false,
  "recipientAccountId": "123456789012",
  "eventCategory": "Data"
}</code></pre>
           <p>
            The following example demonstrates a successful GraphQL request.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class=""><span>{</span>
  "eventVersion": "1.10",
  "userIdentity": <span>{</span>
    "type": "AssumedRole",
    "principalId": "AIDACKCEVSQ6C2EXAMPLE:jane_doe",
    "arn": "arn:aws:sts::123456789012:assumed-role/admin/jane_doe",
    "accountId": "123456789012",
    "sessionContext": <span>{</span>
      "sessionIssuer": <span>{</span>
        "type": "Role",
        "principalId": "AIDACKCEVSQ6C2EXAMPLE",
        "arn": "arn:aws:iam::123456789012:role/admin",
        "accountId": "123456789012",
        "userName": "jane_doe"
      },
      "attributes": <span>{</span>
        "creationDate": "2024-11-06T15:40:09Z",
        "mfaAuthenticated": "false"
      }
    }
  },
  "eventTime": "2024-11-06T16:03:43Z",
  "eventSource": "appsync.amazonaws.com",
  "eventName": "GraphQL",
  "awsRegion": "us-west-2",
  "sourceIPAddress": "15.248.1.214",
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:131.0) Gecko/20100101 Firefox/131.0",
  "requestParameters": null,
  "responseElements": null,
  "additionalEventData": <span>{</span>
    "operationName": "IamFullSuccess",
    "authType": [
      "AWS_IAM"
    ],
    "fieldAuthorizationResults": <span>{</span>
      "allowedFields": [
        "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u/types/Mutation/fields/createSecondPostAllowed"
      ],
      "deniedFields": []
    }
  },
  "requestID": "edc6bbbf-6bf2-40f5-820f-ef444f12e0c1",
  "eventID": "524656a5-0925-4370-9e7e-08888e9c299f",
  "readOnly": false,
  "resources": [
    <span>{</span>
      "accountId": "123456789012",
      "type": "AWS::AppSync::GraphQLApi",
      "ARN": "arn:aws:appsync:us-west-2:123456789012:apis/rxfqcxzi3nbvza2hsq4njqqq6u"
    }
  ],
  "eventType": "AwsApiCall",
  "managementEvent": false,
  "recipientAccountId": "123456789012",
  "eventCategory": "Data"
}</code></pre>
           <awsdocs-copyright class="copyright-print">
           </awsdocs-copyright>
           <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}">
           </awsdocs-thumb-feedback>
          </div>
          <noscript>
           <div>
            <div>
             <div>
              <div id="js_error_message">
               <p>
                <img alt="Warning" src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png"/>
                <strong>
                 Javascript is disabled or is unavailable in your browser.
                </strong>
               </p>
               <p>
                To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.
               </p>
              </div>
             </div>
            </div>
           </div>
          </noscript>
          <div class="awsui-util-font-size-0" id="main-col-footer">
           <div id="doc-conventions">
            <a href="/general/latest/gr/docconventions.html" target="_top">
             Document Conventions
            </a>
           </div>
           <div class="prev-next">
            <div accesskey="p" class="prev-link" href="./x-ray-tracing.html" id="previous">
             Tracing requests in AWS X-Ray
            </div>
            <div accesskey="n" class="next-link" href="./using-private-apis.html" id="next">
             Using AWS AppSync Private APIs
            </div>
           </div>
          </div>
          <awsdocs-page-utilities>
          </awsdocs-page-utilities>
         </div>
         <div id="quick-feedback-yes" style="display: none;">
          <div class="title">
           Did this page help you? - Yes
          </div>
          <div class="content">
           <p>
            Thanks for letting us know we're doing a good job!
           </p>
           <p>
            If you've got a moment, please tell us what we did right so we can do more of it.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AppSync&amp;topic_url=https://docs.aws.amazon.com/en_us/appsync/latest/devguide/cloudtrail-logging.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
         <div id="quick-feedback-no" style="display: none;">
          <div class="title">
           Did this page help you? - No
          </div>
          <div class="content">
           <p>
            Thanks for letting us know this page needs work. We're sorry we let you down.
           </p>
           <p>
            If you've got a moment, please tell us how we can make the documentation better.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AppSync&amp;topic_url=https://docs.aws.amazon.com/en_us/appsync/latest/devguide/cloudtrail-logging.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
        </div>
       </body>
      </div>
     </awsdocs-view>
     <div class="page-loading-indicator" id="page-loading-indicator">
      <awsui-spinner size="large">
      </awsui-spinner>
     </div>
    </div>
    <div dom-region="tools" id="tools-panel">
     <awsdocs-tools-panel id="awsdocs-tools-panel">
     </awsdocs-tools-panel>
    </div>
   </awsui-app-layout>
   <awsdocs-cookie-banner class="doc-cookie-banner">
   </awsdocs-cookie-banner>
  </div>
 </body>
</html>

<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   Monitoring deployments with AWS CloudTrail - AWS CodeDeploy
  </title>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="/assets" name="assets_root"/>
  <meta content="monitoring-cloudtrail" name="target_state"/>
  <meta content="monitoring-cloudtrail" name="default_state"/>
  <link href="/assets/images/favicon.ico" rel="icon" type="image/ico"/>
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico"/>
  <link href="https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring-cloudtrail.html" rel="canonical"/>
  <meta content="Learn how to use the information collected by AWS CloudTrail to determine which request was made to CodeDeploy, the source IP address from which the request was made, who made the request, when it was made, and other details." name="description"/>
  <meta content="IAD" name="deployment_region"/>
  <meta content="AWS CodeDeploy" name="product"/>
  <meta content="User Guide" name="guide"/>
  <meta content="Automate code deployments to any instance using CodeDeploy, including Amazon EC2 instances and instances running on-premises, with this User Guide." name="abstract"/>
  <meta content="en_us" name="guide-locale"/>
  <meta content="toc-contents.json" name="tocs"/>
  <link href="https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring-cloudtrail.html" rel="canonical"/>
  <link href="https://docs.aws.amazon.com/id_id/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="id-id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/id_id/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="de-de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="en-us" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="en" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="es-es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="fr-fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="it-it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="ja-jp" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="ja" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="ko-kr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="ko" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="pt-br" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="pt" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_cn/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="zh-cn" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_tw/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="zh-tw" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring-cloudtrail.html" hreflang="x-default" rel="alternative"/>
  <meta content="CodeDeploy" name="feedback-item"/>
  <meta content="AWS CodeDeploy" name="this_doc_product"/>
  <meta content="User Guide" name="this_doc_guide"/>
  <script defer="" src="/assets/r/vendor4.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor3.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor1.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02">
  </script>
  <link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet"/>
  <script async="" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'codedeploy'}" id="awsc-panorama-bundle" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" type="text/javascript">
  </script>
  <meta id="panorama-serviceSubSection" value="User Guide"/>
  <meta id="panorama-serviceConsolePage" value="Monitoring deployments with AWS CloudTrail"/>
 </head>
 <body class="awsdocs awsui">
  <div class="awsdocs-container">
   <awsdocs-header>
   </awsdocs-header>
   <awsui-app-layout class="awsui-util-no-gutters" header-selector="awsdocs-header" id="app-layout" navigation-change="$ctrl.onNavChange($event)" navigation-hide="false" navigation-open="$ctrl.navOpen" navigation-width="$ctrl.navWidth" ng-controller="ContentController as $ctrl" tools-change="$ctrl.onToolsChange($event)" tools-hide="$ctrl.hideTools" tools-open="$ctrl.toolsOpen" tools-width="$ctrl.toolsWidth">
    <div dom-region="navigation" id="guide-toc">
     <awsdocs-toc>
     </awsdocs-toc>
    </div>
    <div dom-region="content" id="main-column" tabindex="-1">
     <awsdocs-view class="awsdocs-view">
      <div id="awsdocs-content">
       <head>
        <title>
         Monitoring deployments with AWS CloudTrail - AWS CodeDeploy
        </title>
        <meta content="/pdfs/codedeploy/latest/userguide/codedeploy-user.pdf#monitoring-cloudtrail" name="pdf"/>
        <meta content="aws-codedeploy-user-guide-updates.rss" name="rss"/>
        <meta content="http://forums.aws.amazon.com/forum.jspa?forumID=179" name="forums"/>
        <meta content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CodeDeploy&amp;topic_url=https://docs.aws.amazon.com/en_us/codedeploy/latest/userguide/monitoring-cloudtrail.html" name="feedback"/>
        <meta content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/codedeploy/latest/userguide/monitoring-cloudtrail.html" name="feedback-yes"/>
        <meta content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/codedeploy/latest/userguide/monitoring-cloudtrail.html" name="feedback-no"/>
        <meta content="CodeDeploy User Guide,deployment,application,AWS,Developer Tools,Developer Tools Console,Developer Tools Services,Developer Tools AWS,AWS CodeDeploy,CI/CD,continuous integration,continuous delivery,DevOps" name="keywords"/>
        <script type="application/ld+json">
         {
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CodeDeploy",
        "item" : "https://docs.aws.amazon.com/codedeploy/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/codedeploy/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Monitoring deployments in CodeDeploy",
        "item" : "https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Monitoring deployments with AWS CloudTrail",
        "item" : "https://docs.aws.amazon.com/codedeploy/latest/userguide/monitoring.html"
      }
    ]
}
        </script>
       </head>
       <body>
        <div id="main">
         <div style="display: none">
          <a href="/pdfs/codedeploy/latest/userguide/codedeploy-user.pdf#monitoring-cloudtrail" rel="noopener noreferrer" target="_blank" title="Open PDF">
          </a>
         </div>
         <div class="breadcrumb" id="breadcrumbs">
          <a href="https://aws.amazon.com">
           AWS
          </a>
          <a href="/index.html">
           Documentation
          </a>
          <a href="/codedeploy/index.html">
           AWS CodeDeploy
          </a>
          <a href="welcome.html">
           User Guide
          </a>
         </div>
         <div id="page-toc-src">
          <a href="#service-name-info-in-cloudtrail">
           CodeDeploy information in CloudTrail
          </a>
          <a href="#understanding-service-name-entries">
           Understanding CodeDeploy log file
        entries
          </a>
         </div>
         <div class="awsui-util-container" id="main-content">
          <div id="main-col-body">
           <awsdocs-language-banner data-service="$ctrl.pageService">
           </awsdocs-language-banner>
           <h1 class="topictitle" id="monitoring-cloudtrail">
            Monitoring deployments with AWS CloudTrail
           </h1>
           <div class="awsdocs-page-header-container">
            <awsdocs-page-header>
            </awsdocs-page-header>
            <awsdocs-filter-selector id="awsdocs-filter-selector">
            </awsdocs-filter-selector>
           </div>
           <p>
            CodeDeploy is integrated with CloudTrail, a service that captures API calls made by or on behalf of
    CodeDeploy in your AWS account and delivers the log files to an Amazon S3 bucket you specify. CloudTrail
    captures API calls from the CodeDeploy console, from CodeDeploy commands through the AWS CLI, or from the
    CodeDeploy APIs directly. Using the information collected by CloudTrail, you can determine which request
    was made to CodeDeploy, the source IP address from which the request was made, who made the request,
    when it was made, and so on. To learn more about CloudTrail, including how to configure and enable it,
    see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/">
             AWS CloudTrail User Guide
            </a>
            .
           </p>
           <h2 id="service-name-info-in-cloudtrail">
            CodeDeploy information in CloudTrail
           </h2>
           <p>
            When CloudTrail logging is enabled in your AWS account, API calls made to CodeDeploy actions are
      tracked in log files. CodeDeploy records are written together with other AWS service records in a
      log file. CloudTrail determines when to create and write to a new file based on a time period and
      file size.
           </p>
           <p>
            All of the CodeDeploy actions are logged and documented in the
            <a href="https://docs.aws.amazon.com/cli/latest/reference/deploy/index.html">
             AWS CodeDeploy Command Line Reference
            </a>
            and the
            <a href="https://docs.aws.amazon.com/codedeploy/latest/APIReference/">
             AWS CodeDeploy API Reference
            </a>
            . For example, calls to create deployments, delete applications, and
      register application revisions generate entries in CloudTrail log files.
           </p>
           <p>
            Every log entry contains information about who generated the request. The user identity
      information in the log helps you determine whether the request was made with root or 
      user credentials, with temporary security credentials for a role or federated user, or by
      another AWS service. For more information, see the
            <b>
             userIdentity
            </b>
            field
      in the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/event_reference_top_level.html">
             CloudTrail event
      reference
            </a>
            .
           </p>
           <p>
            You can store your log files in your bucket for as long as you
      want, but you can also define Amazon S3 lifecycle rules to archive or delete log files
      automatically. By default, Amazon S3 server-side encryption (SSE) is used to encrypt your log
      files.
           </p>
           <p>
            You can have CloudTrail publish Amazon SNS notifications when new log files are delivered. For more
      information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/getting_notifications_top_level.html">
             Configuring
        Amazon SNS notifications for CloudTrail
            </a>
            .
           </p>
           <p>
            You can also aggregate CodeDeploy log files from multiple AWS regions and multiple AWS
      accounts into a single Amazon S3 bucket. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/aggregating_logs_top_level.html">
             Receiving CloudTrail log files from multiple
        regions
            </a>
            .
           </p>
           <h2 id="understanding-service-name-entries">
            Understanding CodeDeploy log file
        entries
           </h2>
           <p>
            CloudTrail log files can contain one or more log entries where each entry is made up of multiple
      JSON-formatted events. A log entry represents a single request from any source and includes
      information about the requested action, any parameters, the date and time of the action, and
      so on. The log entries are not guaranteed to be in any particular order. That is, they are not
      an ordered stack trace of the public API calls.
           </p>
           <p>
            The following example shows a CloudTrail log entry that demonstrates the CodeDeploy create deployment
      group action:
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli;bash (yaml)--><code class="yaml"><span>{</span>
	"Records": [<span>{</span>
		"eventVersion": "1.02",
		"userIdentity": <span>{</span>
			"type": "AssumedRole",
			"principalId": "AKIAI44QH8DHBEXAMPLE:203.0.113.11",
			"arn": "arn:aws:sts::123456789012:assumed-role/example-role/203.0.113.11",
			"accountId": "123456789012",
			"accessKeyId": "AKIAIOSFODNN7EXAMPLE",
			"sessionContext": <span>{</span>
				"attributes": <span>{</span>
					"mfaAuthenticated": "false",
					"creationDate": "2014-11-27T03:57:36Z"
				},
				"sessionIssuer": <span>{</span>
					"type": "Role",
					"principalId": "AKIAI44QH8DHBEXAMPLE",
					"arn": "arn:aws:iam::123456789012:role/example-role",
					"accountId": "123456789012",
					"userName": "example-role"
				}
			}
		},
		"eventTime": "2014-11-27T03:57:36Z",
		"eventSource": "codedeploy.amazonaws.com",
		"eventName": "CreateDeploymentGroup",
		"awsRegion": "us-west-2",
		"sourceIPAddress": "203.0.113.11",
		"userAgent": "example-user-agent-string",
		"requestParameters": <span>{</span>
			"applicationName": "ExampleApplication",
			"serviceRoleArn": "arn:aws:iam::123456789012:role/example-instance-group-role",
			"deploymentGroupName": "ExampleDeploymentGroup",
			"ec2TagFilters": [<span>{</span>
                "value": "CodeDeployDemo",
				"type": "KEY_AND_VALUE",
				"key": "Name"
            }],
            "deploymentConfigName": "CodeDeployDefault.HalfAtATime"
		},
		"responseElements": <span>{</span>
			"deploymentGroupId": "7d64e680-e6f4-4c07-b10a-9e117EXAMPLE"
		},
		"requestID": "86168559-75e9-11e4-8cf8-75d18EXAMPLE",
		"eventID": "832b82d5-d474-44e8-a51d-093ccEXAMPLE",
		"eventType": "AwsApiCall",
		"recipientAccountId": "123456789012"
	},
    ... additional entries ...
    ]
}</code></pre>
           <awsdocs-copyright class="copyright-print">
           </awsdocs-copyright>
           <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}">
           </awsdocs-thumb-feedback>
          </div>
          <noscript>
           <div>
            <div>
             <div>
              <div id="js_error_message">
               <p>
                <img alt="Warning" src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png"/>
                <strong>
                 Javascript is disabled or is unavailable in your browser.
                </strong>
               </p>
               <p>
                To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.
               </p>
              </div>
             </div>
            </div>
           </div>
          </noscript>
          <div class="awsui-util-font-size-0" id="main-col-footer">
           <div id="doc-conventions">
            <a href="/general/latest/gr/docconventions.html" target="_top">
             Document Conventions
            </a>
           </div>
           <div class="prev-next">
            <div accesskey="p" class="prev-link" href="./monitoring-cloudwatch-events.html" id="previous">
             Monitoring deployments with Amazon CloudWatch Events
            </div>
            <div accesskey="n" class="next-link" href="./monitoring-sns-event-notifications.html" id="next">
             Monitoring deployments with Amazon SNS event notifications
            </div>
           </div>
          </div>
          <awsdocs-page-utilities>
          </awsdocs-page-utilities>
         </div>
         <div id="quick-feedback-yes" style="display: none;">
          <div class="title">
           Did this page help you? - Yes
          </div>
          <div class="content">
           <p>
            Thanks for letting us know we're doing a good job!
           </p>
           <p>
            If you've got a moment, please tell us what we did right so we can do more of it.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CodeDeploy&amp;topic_url=https://docs.aws.amazon.com/en_us/codedeploy/latest/userguide/monitoring-cloudtrail.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
         <div id="quick-feedback-no" style="display: none;">
          <div class="title">
           Did this page help you? - No
          </div>
          <div class="content">
           <p>
            Thanks for letting us know this page needs work. We're sorry we let you down.
           </p>
           <p>
            If you've got a moment, please tell us how we can make the documentation better.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CodeDeploy&amp;topic_url=https://docs.aws.amazon.com/en_us/codedeploy/latest/userguide/monitoring-cloudtrail.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
        </div>
       </body>
      </div>
     </awsdocs-view>
     <div class="page-loading-indicator" id="page-loading-indicator">
      <awsui-spinner size="large">
      </awsui-spinner>
     </div>
    </div>
    <div dom-region="tools" id="tools-panel">
     <awsdocs-tools-panel id="awsdocs-tools-panel">
     </awsdocs-tools-panel>
    </div>
   </awsui-app-layout>
   <awsdocs-cookie-banner class="doc-cookie-banner">
   </awsdocs-cookie-banner>
  </div>
 </body>
</html>

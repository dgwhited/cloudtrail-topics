<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   Viewing Amazon Lookout for Metrics API activity in CloudTrail - Amazon Lookout for Metrics
  </title>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="/assets" name="assets_root"/>
  <meta content="monitoring-cloudtrail" name="target_state"/>
  <meta content="monitoring-cloudtrail" name="default_state"/>
  <link href="/assets/images/favicon.ico" rel="icon" type="image/ico"/>
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico"/>
  <link href="https://docs.aws.amazon.com/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" rel="canonical"/>
  <meta content="Learn about logging Amazon Lookout for Metrics code calls with AWS CloudTrail." name="description"/>
  <meta content="IAD" name="deployment_region"/>
  <meta content="Amazon Lookout for Metrics" name="product"/>
  <meta content="Developer Guide" name="guide"/>
  <meta content="Provides a conceptual overview of Amazon Lookout for Metrics. Includes detailed instructions for using the features and provides a complete API reference for developers." name="abstract"/>
  <meta content="en_us" name="guide-locale"/>
  <meta content="toc-contents.json" name="tocs"/>
  <link href="https://docs.aws.amazon.com/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" rel="canonical"/>
  <link href="https://docs.aws.amazon.com/id_id/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="id-id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/id_id/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="de-de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="en-us" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="en" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="es-es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="fr-fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="it-it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="ja-jp" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="ja" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="ko-kr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="ko" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="pt-br" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="pt" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_cn/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="zh-cn" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_tw/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="zh-tw" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" hreflang="x-default" rel="alternative"/>
  <meta content="Lookout for Metrics" name="feedback-item"/>
  <meta content="Amazon Lookout for Metrics" name="this_doc_product"/>
  <meta content="Developer Guide" name="this_doc_guide"/>
  <script defer="" src="/assets/r/vendor4.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor3.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor1.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02">
  </script>
  <link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet"/>
  <script async="" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lookout-for-metrics'}" id="awsc-panorama-bundle" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" type="text/javascript">
  </script>
  <meta id="panorama-serviceSubSection" value="Developer Guide"/>
  <meta id="panorama-serviceConsolePage" value="Viewing Amazon Lookout for Metrics API activity in CloudTrail"/>
 </head>
 <body class="awsdocs awsui">
  <div class="awsdocs-container">
   <awsdocs-header>
   </awsdocs-header>
   <awsui-app-layout class="awsui-util-no-gutters" header-selector="awsdocs-header" id="app-layout" navigation-change="$ctrl.onNavChange($event)" navigation-hide="false" navigation-open="$ctrl.navOpen" navigation-width="$ctrl.navWidth" ng-controller="ContentController as $ctrl" tools-change="$ctrl.onToolsChange($event)" tools-hide="$ctrl.hideTools" tools-open="$ctrl.toolsOpen" tools-width="$ctrl.toolsWidth">
    <div dom-region="navigation" id="guide-toc">
     <awsdocs-toc>
     </awsdocs-toc>
    </div>
    <div dom-region="content" id="main-column" tabindex="-1">
     <awsdocs-view class="awsdocs-view">
      <div id="awsdocs-content">
       <head>
        <title>
         Viewing Amazon Lookout for Metrics API activity in CloudTrail - Amazon Lookout for Metrics
        </title>
        <meta content="/pdfs/lookoutmetrics/latest/dev/lookoutmetrics-dev.pdf#monitoring-cloudtrail" name="pdf"/>
        <meta content="lookoutmetrics-dev.pdf.rss" name="rss"/>
        <meta content="https://repost.aws/tags/TA06IzrGMeQ-qZCU6fSRyeOg" name="forums"/>
        <meta content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lookout%20for%20Metrics&amp;topic_url=https://docs.aws.amazon.com/en_us/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" name="feedback"/>
        <meta content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" name="feedback-yes"/>
        <meta content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" name="feedback-no"/>
        <script type="application/ld+json">
         {
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lookout for Metrics",
        "item" : "https://docs.aws.amazon.com/lookout-for-metrics/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lookoutmetrics/latest/dev"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Monitoring Lookout for Metrics",
        "item" : "https://docs.aws.amazon.com/lookoutmetrics/latest/dev/lookoutmetrics-monitoring.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Viewing Amazon Lookout for Metrics API activity in CloudTrail",
        "item" : "https://docs.aws.amazon.com/lookoutmetrics/latest/dev/lookoutmetrics-monitoring.html"
      }
    ]
}
        </script>
       </head>
       <body>
        <div id="main">
         <div style="display: none">
          <a href="/pdfs/lookoutmetrics/latest/dev/lookoutmetrics-dev.pdf#monitoring-cloudtrail" rel="noopener noreferrer" target="_blank" title="Open PDF">
          </a>
         </div>
         <div class="breadcrumb" id="breadcrumbs">
          <a href="https://aws.amazon.com">
           AWS
          </a>
          <a href="/index.html">
           Documentation
          </a>
          <a href="/lookout-for-metrics/index.html">
           Amazon Lookout for Metrics
          </a>
          <a href="lookoutmetrics-welcome.html">
           Developer Guide
          </a>
         </div>
         <div id="page-toc-src">
          <a href="#services-cloudtrail-logs">
           Storing Lookout for Metrics information in CloudTrail
          </a>
          <a href="#services-cloudtrail-format">
           Example: Lookout for Metrics log file entry
          </a>
         </div>
         <div class="awsui-util-container" id="main-content">
          <div id="main-col-body">
           <awsdocs-language-banner data-service="$ctrl.pageService">
           </awsdocs-language-banner>
           <h1 class="topictitle" id="monitoring-cloudtrail">
            Viewing Amazon Lookout for Metrics API activity in CloudTrail
           </h1>
           <div class="awsdocs-page-header-container">
            <awsdocs-page-header>
            </awsdocs-page-header>
            <awsdocs-filter-selector id="awsdocs-filter-selector">
            </awsdocs-filter-selector>
           </div>
           <p>
            Amazon Lookout for Metrics is integrated with AWS CloudTrail, a service that provides a record of actions taken by a user, role, or an
    AWS service in Lookout for Metrics. CloudTrail captures all API calls for Lookout for Metrics as events. Captured calls include calls from the Lookout for Metrics
    console and code calls to the Lookout for Metrics API operations.
           </p>
           <p>
            Using the information collected by CloudTrail, you can determine the request that was made to Lookout for Metrics, the IP address
    from which the request was made, who made the request, when it was made, and additional details.
           </p>
           <p>
            All
            <a href="https://docs.aws.amazon.com/lookoutmetrics/latest/api/API_Operations.html">
             Lookout for Metrics calls
            </a>
            are logged by CloudTrail. Log entries contain
    information about who generated the request. The identity information helps you determine the following:
           </p>
           <div class="itemizedlist">
            <ul class="itemizedlist">
             <li class="listitem">
              <p>
               Whether the request was made with root or user credentials.
              </p>
             </li>
             <li class="listitem">
              <p>
               Whether the request was made with temporary security credentials for a role or federated user.
              </p>
             </li>
             <li class="listitem">
              <p>
               Whether the request was made by another AWS service.
              </p>
             </li>
            </ul>
           </div>
           <p>
            For more information, see the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-event-reference-user-identity.html">
             CloudTrail
      userIdentity element
            </a>
            .
           </p>
           <p>
            To learn more about CloudTrail, see the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-user-guide.html">
             AWS CloudTrail User Guide
            </a>
            .
           </p>
           <div class="highlights" id="inline-topiclist">
            <h6>
             Topics
            </h6>
            <ul>
             <li>
              <a href="#services-cloudtrail-logs">
               Storing Lookout for Metrics information in CloudTrail
              </a>
             </li>
             <li>
              <a href="#services-cloudtrail-format">
               Example: Lookout for Metrics log file entry
              </a>
             </li>
            </ul>
           </div>
           <h2 id="services-cloudtrail-logs">
            Storing Lookout for Metrics information in CloudTrail
           </h2>
           <p>
            AWS CloudTrail is activated on your AWS account when you create it. When activity occurs in Lookout for Metrics, it is
      automatically recorded in a CloudTrail event. You can view, search, and download recent events in the
            <b>
             Event
        history
            </b>
            in the CloudTrail console. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/view-cloudtrail-events.html">
             Viewing events with CloudTrail Event history
            </a>
            .
           </p>
           <p>
            For an ongoing record of events in your AWS account, including events for Lookout for Metrics, create a trail. A
            <em>
             trail
            </em>
            enables CloudTrail to send log files to an Amazon S3 bucket. When you create a trail in the
      console, the trail applies to all AWS Regions. The trail logs events from all Regions in the AWS partition. It
      sends the log files to the Amazon S3 bucket that you specify. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-and-update-a-trail.html">
             Overview for creating a trail
            </a>
            .
           </p>
           <p>
           </p>
           <p>
            You can configure other AWS services to further analyze and act upon the event data collected in CloudTrail logs.
      For more information, see the following:
           </p>
           <div class="itemizedlist">
            <ul class="itemizedlist">
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-aws-service-specific-topics.html">
                CloudTrail supported services and
            integrations
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/configure-sns-notifications-for-cloudtrail.html">
                Configuring Amazon SNS
            notifications for CloudTrail
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/receive-cloudtrail-log-files-from-multiple-regions.html">
                Receiving CloudTrail log files
            from multiple Regions
               </a>
               and
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-receive-logs-from-multiple-accounts.html">
                Receiving CloudTrail log files from
            multiple accounts
               </a>
              </p>
             </li>
            </ul>
           </div>
           <h2 id="services-cloudtrail-format">
            Example: Lookout for Metrics log file entry
           </h2>
           <p>
            AWS CloudTrail log files contain one or more log entries, one entry for every event. An event represents a single
      request from any source and includes information about the requested action, the date and time of the action,
      request parameters, and so on. CloudTrail log files aren't an ordered stack trace of the public API calls, so they don't
      appear in any specific order.
           </p>
           <p>
            The following example is a CloudTrail log entry for a
            <code class="code">
             DescribeAnomalyDetector
            </code>
            call. Specific
      information about the call appears in the
            <code class="code">
             eventName
            </code>
            and
            <code class="code">
             requestParameters
            </code>
            fields. The
      remaining fields record details about the caller and tracking information such as the request ID, which you can
      use to find information about the request in places like logs and
            <a href="https://docs.aws.amazon.com/xray/latest/devguide/">
             AWS X-Ray
            </a>
            traces.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (json)--><code class="json"><span>{</span>
    "eventVersion": "1.08",
    "userIdentity": <span>{</span>
        "type": "IAMUser",
        "principalId": "AKIAI44QH8DHBEXAMPLE",
        "arn": "arn:aws:iam::123456789012:user/fred",
        "accountId": "123456789012",
        "accessKeyId": "AKIAIOSFODNN7EXAMPLE",
        "userName": "fred",
        "sessionContext": <span>{</span>
            "sessionIssuer": <span>{</span>},
            "webIdFederationData": <span>{</span>},
            "attributes": <span>{</span>
                "mfaAuthenticated": "false",
                "creationDate": "2021-01-09T00:14:34Z"
            }
        }
    },
    "eventTime": "2021-01-09T00:18:12Z",
    "eventSource": "lookoutmetrics.amazonaws.com",
    "eventName": "DescribeAnomalyDetector",
    "awsRegion": "us-east-2",
    "sourceIPAddress": "205.256.256.182",
    "userAgent": "aws-sdk-java/1.11.930 Linux/4.9.230-0.1.ac.223.84.332.metal1.x86_64 OpenJDK_64-Bit_Server_VM/25.275-b01 java/1.8.0_275 vendor/Oracle_Corporation",
    "requestParameters": <span>{</span>
        "AnomalyDetectorArn": "arn:aws:lookoutmetrics:us-east-2:123456789012:AnomalyDetector:my-detector-5m"
    },
    "responseElements": null,
    "requestID": "f587ee3c-xmpl-406b-b573-66100bb14b61",
    "eventID": "f2f879f8-xmpl-4475-9c0c-4291a389e14a",
    "readOnly": true,
    "eventType": "AwsApiCall",
    "managementEvent": true,
    "eventCategory": "Management",
    "recipientAccountId": "123456789012"
}</code></pre>
           <awsdocs-copyright class="copyright-print">
           </awsdocs-copyright>
           <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}">
           </awsdocs-thumb-feedback>
          </div>
          <noscript>
           <div>
            <div>
             <div>
              <div id="js_error_message">
               <p>
                <img alt="Warning" src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png"/>
                <strong>
                 Javascript is disabled or is unavailable in your browser.
                </strong>
               </p>
               <p>
                To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.
               </p>
              </div>
             </div>
            </div>
           </div>
          </noscript>
          <div class="awsui-util-font-size-0" id="main-col-footer">
           <div id="doc-conventions">
            <a href="/general/latest/gr/docconventions.html" target="_top">
             Document Conventions
            </a>
           </div>
           <div class="prev-next">
            <div accesskey="p" class="prev-link" href="./lookoutmetrics-monitoring.html" id="previous">
             Monitoring
            </div>
            <div accesskey="n" class="next-link" href="./monitoring-cloudwatch.html" id="next">
             CloudWatch
            </div>
           </div>
          </div>
          <awsdocs-page-utilities>
          </awsdocs-page-utilities>
         </div>
         <div id="quick-feedback-yes" style="display: none;">
          <div class="title">
           Did this page help you? - Yes
          </div>
          <div class="content">
           <p>
            Thanks for letting us know we're doing a good job!
           </p>
           <p>
            If you've got a moment, please tell us what we did right so we can do more of it.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lookout for Metrics&amp;topic_url=https://docs.aws.amazon.com/en_us/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
         <div id="quick-feedback-no" style="display: none;">
          <div class="title">
           Did this page help you? - No
          </div>
          <div class="content">
           <p>
            Thanks for letting us know this page needs work. We're sorry we let you down.
           </p>
           <p>
            If you've got a moment, please tell us how we can make the documentation better.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lookout for Metrics&amp;topic_url=https://docs.aws.amazon.com/en_us/lookoutmetrics/latest/dev/monitoring-cloudtrail.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
        </div>
       </body>
      </div>
     </awsdocs-view>
     <div class="page-loading-indicator" id="page-loading-indicator">
      <awsui-spinner size="large">
      </awsui-spinner>
     </div>
    </div>
    <div dom-region="tools" id="tools-panel">
     <awsdocs-tools-panel id="awsdocs-tools-panel">
     </awsdocs-tools-panel>
    </div>
   </awsui-app-layout>
   <awsdocs-cookie-banner class="doc-cookie-banner">
   </awsdocs-cookie-banner>
  </div>
 </body>
</html>

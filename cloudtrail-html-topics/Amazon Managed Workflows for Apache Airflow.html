<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   Viewing audit logs in AWS CloudTrail - Amazon Managed Workflows for Apache Airflow
  </title>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="/assets" name="assets_root"/>
  <meta content="monitoring-cloudtrail" name="target_state"/>
  <meta content="monitoring-cloudtrail" name="default_state"/>
  <link href="/assets/images/favicon.ico" rel="icon" type="image/ico"/>
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico"/>
  <link href="https://docs.aws.amazon.com/mwaa/latest/userguide/monitoring-cloudtrail.html" rel="canonical"/>
  <meta content="Learn about how to use AWS CloudTrail to monitor an Amazon Managed Workflows for Apache Airflow environment." name="description"/>
  <meta content="IAD" name="deployment_region"/>
  <meta content="Amazon Managed Workflows for Apache Airflow" name="product"/>
  <meta content="User Guide" name="guide"/>
  <meta content="Learn about how to use Amazon Managed Workflows for Apache Airflow to create environments that let you easily configure, deploy, and manage your Apache Airflow workflows." name="abstract"/>
  <meta content="en_us" name="guide-locale"/>
  <meta content="toc-contents.json" name="tocs"/>
  <link href="https://docs.aws.amazon.com/mwaa/latest/userguide/monitoring-cloudtrail.html" rel="canonical"/>
  <link href="https://docs.aws.amazon.com/id_id/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="id-id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/id_id/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="de-de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="en-us" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="en" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="es-es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="fr-fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="it-it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="ja-jp" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="ja" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="ko-kr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="ko" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="pt-br" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="pt" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_cn/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="zh-cn" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_tw/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="zh-tw" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/mwaa/latest/userguide/monitoring-cloudtrail.html" hreflang="x-default" rel="alternative"/>
  <meta content="mwaa" name="feedback-item"/>
  <meta content="Amazon Managed Workflows for Apache Airflow" name="this_doc_product"/>
  <meta content="User Guide" name="this_doc_guide"/>
  <script defer="" src="/assets/r/vendor4.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor3.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/vendor1.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02">
  </script>
  <script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02">
  </script>
  <link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet"/>
  <link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet"/>
  <script async="" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'mwaa'}" id="awsc-panorama-bundle" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" type="text/javascript">
  </script>
  <meta id="panorama-serviceSubSection" value="User Guide"/>
  <meta id="panorama-serviceConsolePage" value="Viewing audit logs in AWS CloudTrail"/>
 </head>
 <body class="awsdocs awsui">
  <div class="awsdocs-container">
   <awsdocs-header>
   </awsdocs-header>
   <awsui-app-layout class="awsui-util-no-gutters" header-selector="awsdocs-header" id="app-layout" navigation-change="$ctrl.onNavChange($event)" navigation-hide="false" navigation-open="$ctrl.navOpen" navigation-width="$ctrl.navWidth" ng-controller="ContentController as $ctrl" tools-change="$ctrl.onToolsChange($event)" tools-hide="$ctrl.hideTools" tools-open="$ctrl.toolsOpen" tools-width="$ctrl.toolsWidth">
    <div dom-region="navigation" id="guide-toc">
     <awsdocs-toc>
     </awsdocs-toc>
    </div>
    <div dom-region="content" id="main-column" tabindex="-1">
     <awsdocs-view class="awsdocs-view">
      <div id="awsdocs-content">
       <head>
        <title>
         Viewing audit logs in AWS CloudTrail - Amazon Managed Workflows for Apache Airflow
        </title>
        <meta content="/pdfs/mwaa/latest/userguide/amazon-mwaa-user-guide.pdf#monitoring-cloudtrail" name="pdf"/>
        <meta content="amazon-mwaa-user-guide.rss" name="rss"/>
        <meta content="https://repost.aws/" name="forums"/>
        <meta content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=mwaa&amp;topic_url=https://docs.aws.amazon.com/en_us/mwaa/latest/userguide/monitoring-cloudtrail.html" name="feedback"/>
        <meta content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/mwaa/latest/userguide/monitoring-cloudtrail.html" name="feedback-yes"/>
        <meta content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/mwaa/latest/userguide/monitoring-cloudtrail.html" name="feedback-no"/>
        <script type="application/ld+json">
         {
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Managed Workflows for Apache Airflow",
        "item" : "https://docs.aws.amazon.com/mwaa/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/mwaa/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Monitoring and metrics for Amazon Managed Workflows for Apache Airflow",
        "item" : "https://docs.aws.amazon.com/mwaa/latest/userguide/cw-metrics.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Viewing audit logs in AWS CloudTrail",
        "item" : "https://docs.aws.amazon.com/mwaa/latest/userguide/cw-metrics.html"
      }
    ]
}
        </script>
       </head>
       <body>
        <div id="main">
         <div style="display: none">
          <a href="/pdfs/mwaa/latest/userguide/amazon-mwaa-user-guide.pdf#monitoring-cloudtrail" rel="noopener noreferrer" target="_blank" title="Open PDF">
          </a>
         </div>
         <div class="breadcrumb" id="breadcrumbs">
          <a href="/index.html">
           Documentation
          </a>
          <a href="/mwaa/index.html">
           Amazon Managed Workflows for Apache Airflow
          </a>
          <a href="what-is-mwaa.html">
           User Guide
          </a>
         </div>
         <div id="page-toc-src">
          <a href="#monitoring-cloudtrail-create">
           Creating a trail in CloudTrail
          </a>
          <a href="#monitoring-cloudtrail-view">
           Viewing events with CloudTrail Event History
          </a>
          <a href="#monitoring-cloudtrail-logs-ex">
           Example trail for CreateEnvironment
          </a>
          <a href="#monitoring-cloudtrail-next-up">
           What's next?
          </a>
         </div>
         <div class="awsui-util-container" id="main-content">
          <div id="main-col-body">
           <awsdocs-language-banner data-service="$ctrl.pageService">
           </awsdocs-language-banner>
           <h1 class="topictitle" id="monitoring-cloudtrail">
            Viewing audit logs in AWS CloudTrail
           </h1>
           <div class="awsdocs-page-header-container">
            <awsdocs-page-header>
            </awsdocs-page-header>
            <awsdocs-filter-selector id="awsdocs-filter-selector">
            </awsdocs-filter-selector>
           </div>
           <p>
            AWS CloudTrail is enabled on your AWS account when you create it. CloudTrail logs the activity taken by an IAM entity or an AWS service, such as Amazon Managed Workflows for Apache Airflow, which is recorded as a CloudTrail event.
      You can view, search, and download the past 90 days of event history in the CloudTrail console. CloudTrail captures all events on the Amazon MWAA console and all calls to Amazon MWAA APIs. It doesn't capture read-only actions,
      such as
            <code class="code">
             GetEnvironment
            </code>
            , or the
            <code class="code">
             PublishMetrics
            </code>
            action. This page describes how to use CloudTrail to monitor events for Amazon MWAA.
           </p>
           <div class="highlights" id="inline-topiclist">
            <h6>
             Contents
            </h6>
            <ul>
             <li>
              <p>
               <a href="./monitoring-cloudtrail.html#monitoring-cloudtrail-create">
                Creating a trail in CloudTrail
               </a>
              </p>
             </li>
             <li>
              <p>
               <a href="./monitoring-cloudtrail.html#monitoring-cloudtrail-view">
                Viewing events with CloudTrail Event History
               </a>
              </p>
             </li>
             <li>
              <p>
               <a href="./monitoring-cloudtrail.html#monitoring-cloudtrail-logs-ex">
                Example trail for CreateEnvironment
               </a>
              </p>
             </li>
             <li>
              <p>
               <a href="./monitoring-cloudtrail.html#monitoring-cloudtrail-next-up">
                What's next?
               </a>
              </p>
             </li>
            </ul>
           </div>
           <h2 id="monitoring-cloudtrail-create">
            Creating a trail in CloudTrail
           </h2>
           <p>
            You need to create a trail to view an ongoing record of events in your AWS account, including events for Amazon MWAA. A trail enables CloudTrail to deliver log files to an Amazon S3 bucket. If you do not create a trail, you can still view available event history in the CloudTrail console. For example, using the information collected by CloudTrail, you can determine the request that was made to Amazon MWAA, the IP address from which the request was made, who made the request, when it was made, and additional details. To learn more, see the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-and-update-a-trail.html">
             Creating a trail for your AWS account
            </a>
            .
           </p>
           <h2 id="monitoring-cloudtrail-view">
            Viewing events with CloudTrail Event History
           </h2>
           <p>
            You can troubleshoot operational and security incidents over the past 90 days in the CloudTrail console by viewing event history. For example, you can view events related to the creation, modification, or deletion of resources (such as IAM users or other AWS resources) in your AWS account on a per-region basis. To learn more, see the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/view-cloudtrail-events.html">
             Viewing Events with CloudTrail Event History
            </a>
            .
           </p>
           <div class="procedure">
            <ol>
             <li>
              <p>
               Open the
               <a href="https://console.aws.amazon.com/cloudtrail/home#" rel="noopener noreferrer" target="_blank">
                <span>
                 CloudTrail
                </span>
                <awsui-icon class="awsdocs-link-icon" name="external">
                </awsui-icon>
               </a>
               console.
              </p>
             </li>
             <li>
              <p>
               Choose
               <b>
                Event history
               </b>
               .
              </p>
             </li>
             <li>
              <p>
               Select the events you want to view, and then choose
               <b>
                Compare event details
               </b>
               .
              </p>
             </li>
            </ol>
           </div>
           <h2 id="monitoring-cloudtrail-logs-ex">
            Example trail for
            <code class="code">
             CreateEnvironment
            </code>
           </h2>
           <p>
            A trail is a configuration that enables delivery of events as log files to an Amazon S3 bucket that you specify.
           </p>
           <p>
            CloudTrail log files contain one or more log entries. An event represents a single request from any source and includes information about the requested action, such as the date and time of the action, or request parameters. CloudTrail log files are not an ordered stack trace of the public API calls, and don't appear in any specific order. The following example is a log entry for the
            <code class="code">
             CreateEnvironment
            </code>
            action that is denied due to lacking permissions. The values in
            <code class="code">
             AirflowConfigurationOptions
            </code>
            have been redacted for privacy.
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (json)--><code class="json"><span>{</span>
    "eventVersion": "1.05",
    "userIdentity": <span>{</span>
        "type": "AssumedRole",
        "principalId": "00123456ABC7DEF8HIJK",
        "arn": "arn:aws:sts::012345678901:assumed-role/root/myuser",
        "accountId": "012345678901",
        "accessKeyId": "",
        "sessionContext": <span>{</span>
            "sessionIssuer": <span>{</span>
                "type": "Role",
                "principalId": "00123456ABC7DEF8HIJK",
                "arn": "arn:aws:iam::012345678901:role/user",
                "accountId": "012345678901",
                "userName": "user"
            },
            "webIdFederationData": <span>{</span>},
            "attributes": <span>{</span>
                "mfaAuthenticated": "false",
                "creationDate": "2020-10-07T15:51:52Z"
            }
        }
    },
    "eventTime": "2020-10-07T15:52:58Z",
    "eventSource": "airflow.amazonaws.com",
    "eventName": "CreateEnvironment",
    "awsRegion": "us-west-2",
    "sourceIPAddress": "205.251.233.178",
    "userAgent": "PostmanRuntime/7.26.5",
    "errorCode": "AccessDenied",
    "requestParameters": <span>{</span>
        "SourceBucketArn": "arn:aws:s3:::my-bucket",
        "ExecutionRoleArn": "arn:aws:iam::012345678901:role/AirflowTaskRole",
        "AirflowConfigurationOptions": "***",
        "DagS3Path": "sample_dag.py",
        "NetworkConfiguration": <span>{</span>
            "SecurityGroupIds": [
                "sg-01234567890123456"
            ],
            "SubnetIds": [
                "subnet-01234567890123456",
                "subnet-65432112345665431"
            ]
        },
        "Name": "test-cloudtrail"
    },
    "responseElements": <span>{</span>
        "message": "Access denied."
    },
    "requestID": "RequestID",
    "eventID": "EventID",
    "readOnly": false,
    "eventType": "AwsApiCall",
    "recipientAccountId": "012345678901"
}</code></pre>
           <h2 id="monitoring-cloudtrail-next-up">
            What's next?
           </h2>
           <div class="itemizedlist">
            <ul class="itemizedlist">
             <li class="listitem">
              <p>
               Learn how to configure other AWS services for the event data collected in CloudTrail logs in
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-aws-service-specific-topics.html#cloudtrail-aws-service-specific-topics-integrations">
                CloudTrail Supported Services and Integrations
               </a>
               .
              </p>
             </li>
             <li class="listitem">
              <p>
               Learn how to be notified when CloudTrail publishes new log files to an Amazon S3 bucket in
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/getting_notifications_top_level.html">
                Configuring Amazon SNS Notifications for CloudTrail
               </a>
               .
              </p>
             </li>
            </ul>
           </div>
           <awsdocs-copyright class="copyright-print">
           </awsdocs-copyright>
           <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}">
           </awsdocs-thumb-feedback>
          </div>
          <noscript>
           <div>
            <div>
             <div>
              <div id="js_error_message">
               <p>
                <img alt="Warning" src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png"/>
                <strong>
                 Javascript is disabled or is unavailable in your browser.
                </strong>
               </p>
               <p>
                To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.
               </p>
              </div>
             </div>
            </div>
           </div>
          </noscript>
          <div class="awsui-util-font-size-0" id="main-col-footer">
           <div id="doc-conventions">
            <a href="/general/latest/gr/docconventions.html" target="_top">
             Document Conventions
            </a>
           </div>
           <div class="prev-next">
            <div accesskey="p" class="prev-link" href="./monitoring-overview.html" id="previous">
             Overview
            </div>
            <div accesskey="n" class="next-link" href="./monitoring-airflow.html" id="next">
             Viewing Airflow logs
            </div>
           </div>
          </div>
          <awsdocs-page-utilities>
          </awsdocs-page-utilities>
         </div>
         <div id="quick-feedback-yes" style="display: none;">
          <div class="title">
           Did this page help you? - Yes
          </div>
          <div class="content">
           <p>
            Thanks for letting us know we're doing a good job!
           </p>
           <p>
            If you've got a moment, please tell us what we did right so we can do more of it.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=mwaa&amp;topic_url=https://docs.aws.amazon.com/en_us/mwaa/latest/userguide/monitoring-cloudtrail.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
         <div id="quick-feedback-no" style="display: none;">
          <div class="title">
           Did this page help you? - No
          </div>
          <div class="content">
           <p>
            Thanks for letting us know this page needs work. We're sorry we let you down.
           </p>
           <p>
            If you've got a moment, please tell us how we can make the documentation better.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=mwaa&amp;topic_url=https://docs.aws.amazon.com/en_us/mwaa/latest/userguide/monitoring-cloudtrail.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
        </div>
       </body>
      </div>
     </awsdocs-view>
     <div class="page-loading-indicator" id="page-loading-indicator">
      <awsui-spinner size="large">
      </awsui-spinner>
     </div>
    </div>
    <div dom-region="tools" id="tools-panel">
     <awsdocs-tools-panel id="awsdocs-tools-panel">
     </awsdocs-tools-panel>
    </div>
   </awsui-app-layout>
   <awsdocs-cookie-banner class="doc-cookie-banner">
   </awsdocs-cookie-banner>
  </div>
 </body>
</html>

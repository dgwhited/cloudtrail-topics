<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   Logging AWS Directory Service API calls using AWS CloudTrail - AWS Directory Service
  </title>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="/assets" name="assets_root"/>
  <meta content="logging-using-cloudtrail-ads" name="target_state"/>
  <meta content="logging-using-cloudtrail-ads" name="default_state"/>
  <link href="/assets/images/favicon.ico" rel="icon" type="image/ico"/>
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico"/>
  <link href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" rel="canonical"/>
  <meta content="Learn about logging AWS Directory Service with AWS CloudTrail." name="description"/>
  <meta content="IAD" name="deployment_region"/>
  <meta content="AWS Directory Service" name="product"/>
  <meta content="Administration Guide" name="guide"/>
  <meta content="AWS Directory Service is a directory as a service that provides the capabilities of an enterprise directory with the accessibility and security of the AWS cloud." name="abstract"/>
  <meta content="en_us" name="guide-locale"/>
  <meta content="toc-contents.json" name="tocs"/>
  <link href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" rel="canonical"/>
  <link href="https://docs.aws.amazon.com/id_id/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="id-id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/id_id/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="id" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="de-de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/de_de/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="de" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="en-us" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="en" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="es-es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/es_es/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="es" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="fr-fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/fr_fr/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="fr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="it-it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/it_it/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="it" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="ja-jp" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ja_jp/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="ja" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="ko-kr" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/ko_kr/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="ko" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="pt-br" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/pt_br/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="pt" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_cn/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="zh-cn" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/zh_tw/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="zh-tw" rel="alternative"/>
  <link href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" hreflang="x-default" rel="alternative"/>
  <meta content="DirectoryService" name="feedback-item"/>
  <meta content="AWS Directory Service" name="this_doc_product"/>
  <meta content="Administration Guide" name="this_doc_guide"/>
  <head xmlns="http://www.w3.org/1999/xhtml">
   <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js">
   </script>
   <link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/>
  </head>
  <script data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'directory-service'}" defer="" id="awsc-panorama-bundle" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" type="text/javascript">
  </script>
  <meta id="panorama-serviceSubSection" value="Administration Guide"/>
  <meta id="panorama-serviceConsolePage" value="Logging AWS Directory Service API calls using AWS CloudTrail"/>
 </head>
 <body class="awsdocs awsui">
  <div class="awsdocs-container">
   <awsdocs-header>
   </awsdocs-header>
   <awsui-app-layout class="awsui-util-no-gutters" header-selector="awsdocs-header" id="app-layout" navigation-change="$ctrl.onNavChange($event)" navigation-hide="false" navigation-open="$ctrl.navOpen" navigation-width="$ctrl.navWidth" ng-controller="ContentController as $ctrl" tools-change="$ctrl.onToolsChange($event)" tools-hide="$ctrl.hideTools" tools-open="$ctrl.toolsOpen" tools-width="$ctrl.toolsWidth">
    <div dom-region="navigation" id="guide-toc">
     <awsdocs-toc>
     </awsdocs-toc>
    </div>
    <div dom-region="content" id="main-column" tabindex="-1">
     <awsdocs-view class="awsdocs-view">
      <div id="awsdocs-content">
       <head>
        <title>
         Logging AWS Directory Service API calls using AWS CloudTrail - AWS Directory Service
        </title>
        <meta content="/pdfs/directoryservice/latest/admin-guide/directoryservice-admin-guide.pdf#logging-using-cloudtrail-ads" name="pdf"/>
        <meta content="aws-directory-service-admin-guide-doc-history.rss" name="rss"/>
        <meta content="https://repost.aws/tags/TAkGIL-2I9RYOFF_luDq9dMQ" name="forums"/>
        <meta content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=DirectoryService&amp;topic_url=https://docs.aws.amazon.com/en_us/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" name="feedback"/>
        <meta content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" name="feedback-yes"/>
        <meta content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" name="feedback-no"/>
        <meta content="Directory Services,Directory Service,Active Directory,AD Connector,Simple AD,Trust Relationship" name="keywords"/>
        <script type="application/ld+json">
         {
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Directory Service",
        "item" : "https://docs.aws.amazon.com/directory-service/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Administration Guide",
        "item" : "https://docs.aws.amazon.com/directoryservice/latest/admin-guide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in AWS Directory Service",
        "item" : "https://docs.aws.amazon.com/directoryservice/latest/admin-guide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Logging and monitoring in AWS Directory Service",
        "item" : "https://docs.aws.amazon.com/directoryservice/latest/admin-guide/incident-response.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Logging AWS Directory Service API calls using AWS CloudTrail",
        "item" : "https://docs.aws.amazon.com/directoryservice/latest/admin-guide/incident-response.html"
      }
    ]
}
        </script>
       </head>
       <body>
        <div id="main">
         <div style="display: none">
          <a href="/pdfs/directoryservice/latest/admin-guide/directoryservice-admin-guide.pdf#logging-using-cloudtrail-ads" rel="noopener noreferrer" target="_blank" title="Open PDF">
          </a>
         </div>
         <div class="breadcrumb" id="breadcrumbs">
          <a href="/index.html">
           Documentation
          </a>
          <a href="/directory-service/index.html">
           AWS Directory Service
          </a>
          <a href="what_is.html">
           Administration Guide
          </a>
         </div>
         <div id="page-toc-src">
          <a href="#service-name-info-in-cloudtrail">
           AWS Managed Microsoft AD Information in CloudTrail
          </a>
          <a href="#understanding-service-name-entries">
           Understanding AWS Managed Microsoft AD Log File Entries
          </a>
         </div>
         <div class="awsui-util-container" id="main-content">
          <div id="main-col-body">
           <awsdocs-language-banner data-service="$ctrl.pageService">
           </awsdocs-language-banner>
           <h1 class="topictitle" id="logging-using-cloudtrail-ads">
            Logging AWS Directory Service API calls using AWS CloudTrail
           </h1>
           <div class="awsdocs-page-header-container">
            <awsdocs-page-header>
            </awsdocs-page-header>
            <awsdocs-filter-selector id="awsdocs-filter-selector">
            </awsdocs-filter-selector>
           </div>
           <p>
            The AWS Managed Microsoft AD API is integrated with AWS CloudTrail, a service that captures API calls made by
        or on behalf of AWS Managed Microsoft AD in your AWS account and delivers the log files to an Amazon S3 bucket
        that you specify. CloudTrail captures API calls from the AWS Managed Microsoft AD console and from code calls to
        the AWS Managed Microsoft AD APIs. Using the information collected by CloudTrail, you can determine what request
        was made to AWS Managed Microsoft AD, the source IP address from which the request was made, who made the
        request, when it was made, and so on. To learn more about CloudTrail, see the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/">
             AWS CloudTrail User Guide
            </a>
            .
           </p>
           <h2 id="service-name-info-in-cloudtrail">
            AWS Managed Microsoft AD Information in CloudTrail
           </h2>
           <p>
            CloudTrail is enabled on your AWS account when you create the account. When activity occurs in
            AWS Managed Microsoft AD, that activity is recorded in a CloudTrail event along with other AWS service
            events in
            <b>
             Event history
            </b>
            . You can view, search, and download recent events 
            in your AWS account. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/view-cloudtrail-events.html">
             Viewing Events with CloudTrail Event
                History
            </a>
            .
           </p>
           <p>
            For an ongoing record of events in your AWS account, including events for AWS Managed Microsoft AD,
            create a trail. A
            <em>
             trail
            </em>
            enables CloudTrail to deliver log files to an Amazon S3 bucket. 
            By default, when you create a trail in the console, the trail applies to all AWS Regions. The trail logs events
            from all Regions in the AWS partition and delivers the log files to the Amazon S3 bucket that you
            specify.  Additionally, you can configure other AWS services to further analyze and act upon
            the event data collected in CloudTrail logs. For more information, see the following:
           </p>
           <div class="itemizedlist">
            <ul class="itemizedlist">
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-and-update-a-trail.html">
                Overview for Creating a Trail
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-aws-service-specific-topics.html#cloudtrail-aws-service-specific-topics-integrations">
                CloudTrail Supported Services and Integrations
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/getting_notifications_top_level.html">
                Configuring Amazon SNS Notifications
                    for CloudTrail
               </a>
              </p>
             </li>
             <li class="listitem">
              <p>
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/receive-cloudtrail-log-files-from-multiple-regions.html">
                Receiving CloudTrail Log
                    Files from Multiple Regions
               </a>
               and
               <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-receive-logs-from-multiple-accounts.html">
                Receiving CloudTrail Log
                        Files from Multiple Accounts
               </a>
              </p>
             </li>
            </ul>
           </div>
           <p>
            When CloudTrail logging is enabled in your AWS account, all API calls made to AWS Managed Microsoft AD
            actions are tracked in log files. AWS Managed Microsoft AD records are written together with other AWS
            service records in a log file. CloudTrail determines when to create and write to a new file based on
            a time period and file size. All calls made to the Directory Service API or CLI calls are logged by
            CloudTrail.
           </p>
           <p>
            Every log entry contains information about who generated the request. The user identity
            information in the log helps you determine whether the request was made with root or IAM user credentials, with temporary security credentials for a role or federated user, or by
            another AWS service. For more information, see the
            <b>
             userIdentity
            </b>
            field in
            the
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/event_reference_top_level.html">
             CloudTrail Event
                Reference
            </a>
            .
           </p>
           <p>
            You can store your log files in your bucket for as long as you want, but you can also
            define Amazon S3 lifecycle rules to archive or delete log files automatically. By default, your log
            files are encrypted by using Amazon S3 server-side encryption (SSE).
           </p>
           <p>
            You can choose to have CloudTrail publish Amazon SNS notifications when new log files are delivered
            if you want to take quick action upon log file delivery. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/getting_notifications_top_level.html">
             Configuring Amazon SNS
                Notifications
            </a>
            .
           </p>
           <p>
            You can also aggregate AWS Managed Microsoft AD log files from multiple AWS Regions and AWS accounts
            into a single Amazon S3 bucket. For more information, see
            <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/aggregating_logs_top_level.html">
             Aggregating CloudTrail Log Files to a
                Single Amazon S3 Bucket
            </a>
            .
           </p>
           <h2 id="understanding-service-name-entries">
            Understanding AWS Managed Microsoft AD Log File Entries
           </h2>
           <p>
            CloudTrail log files can contain one or more log entries, where each entry is made up of
            multiple JSON-formatted events. A log entry represents a single request from any source and
            includes information about the requested action, any parameters, the date and time of the
            action, and so on. The log entries are not guaranteed to be in any particular order; that is,
            they are not an ordered stack trace of the public API calls.
           </p>
           <p>
            Sensitive information, such as passwords, authentication tokens, file comments, and file
            contents are redacted in the log entries.
           </p>
           <p>
            The following example shows an example of a CloudTrail log entry for AWS Managed Microsoft AD:
           </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class="nohighlight"><span>{</span>
  "Records" : [
    <span>{</span>
      "eventVersion" : "1.02",
      "userIdentity" :
      <span>{</span>
        "type" : "IAMUser",
        "principalId" : "<code class="replaceable">&lt;user_id&gt;</code>",
        "arn" : "<code class="replaceable">&lt;user_arn&gt;</code>",
        "accountId" : "<code class="replaceable">&lt;account_id&gt;</code>",
        "accessKeyId" : "<code class="replaceable">&lt;access_key_id&gt;</code>",
        "userName" : "<code class="replaceable">&lt;username&gt;</code>"
      },
      "eventTime" : "<code class="replaceable">&lt;event_time&gt;</code>",
      "eventSource" : "ds.amazonaws.com",
      "eventName" : "CreateDirectory",
      "awsRegion" : "<code class="replaceable">&lt;region&gt;</code>",
      "sourceIPAddress" : "<code class="replaceable">&lt;IP_address&gt;</code>",
      "userAgent" : "<code class="replaceable">&lt;user_agent&gt;</code>",
      "requestParameters" :
      <span>{</span>
        "name" : "<code class="replaceable">&lt;name&gt;</code>",
        "shortName" : "<code class="replaceable">&lt;short_name&gt;</code>",
        "vpcSettings" :
        <span>{</span>
          "vpcId" : "<code class="replaceable">&lt;vpc_id&gt;</code>",
          "subnetIds" : [
            "<code class="replaceable">&lt;subnet_id_1&gt;</code>",
            "<code class="replaceable">&lt;subnet_id_2&gt;</code>"
          ]
        },
        "type" : "<code class="replaceable">&lt;size&gt;</code>",
        "setAsDefault" : <code class="replaceable">&lt;option&gt;</code>,
        "password" : "***OMITTED***"
      },
      "responseElements" :
      <span>{</span>
        "requestId" : "<code class="replaceable">&lt;request_id&gt;</code>",
        "directoryId" : "<code class="replaceable">&lt;directory_id&gt;</code>"
      },
      "requestID" : "<code class="replaceable">&lt;request_id&gt;</code>",
      "eventID" : "<code class="replaceable">&lt;event_id&gt;</code>",
      "eventType" : "AwsApiCall",
      "recipientAccountId" : "<code class="replaceable">&lt;account_id&gt;</code>"
    }
  ]
}</code></pre>
           <awsdocs-copyright class="copyright-print">
           </awsdocs-copyright>
           <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}">
           </awsdocs-thumb-feedback>
          </div>
          <noscript>
           <div>
            <div>
             <div>
              <div id="js_error_message">
               <p>
                <img alt="Warning" src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png"/>
                <strong>
                 Javascript is disabled or is unavailable in your browser.
                </strong>
               </p>
               <p>
                To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.
               </p>
              </div>
             </div>
            </div>
           </div>
          </noscript>
          <div class="awsui-util-font-size-0" id="main-col-footer">
           <div id="doc-conventions">
            <a href="/general/latest/gr/docconventions.html" target="_top">
             Document Conventions
            </a>
           </div>
           <div class="prev-next">
            <div accesskey="p" class="prev-link" href="./incident-response.html" id="previous">
             Logging and monitoring
            </div>
            <div accesskey="n" class="next-link" href="./logging-using-cloudtrail.html" id="next">
             AWS Directory Service Data logs
            </div>
           </div>
          </div>
          <awsdocs-page-utilities>
          </awsdocs-page-utilities>
         </div>
         <div id="quick-feedback-yes" style="display: none;">
          <div class="title">
           Did this page help you? - Yes
          </div>
          <div class="content">
           <p>
            Thanks for letting us know we're doing a good job!
           </p>
           <p>
            If you've got a moment, please tell us what we did right so we can do more of it.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=DirectoryService&amp;topic_url=https://docs.aws.amazon.com/en_us/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
         <div id="quick-feedback-no" style="display: none;">
          <div class="title">
           Did this page help you? - No
          </div>
          <div class="content">
           <p>
            Thanks for letting us know this page needs work. We're sorry we let you down.
           </p>
           <p>
            If you've got a moment, please tell us how we can make the documentation better.
           </p>
           <p>
            <awsui-button click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=DirectoryService&amp;topic_url=https://docs.aws.amazon.com/en_us/directoryservice/latest/admin-guide/logging-using-cloudtrail-ads.html" id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback">
            </awsui-button>
           </p>
          </div>
         </div>
        </div>
       </body>
      </div>
     </awsdocs-view>
     <div class="page-loading-indicator" id="page-loading-indicator">
      <awsui-spinner size="large">
      </awsui-spinner>
     </div>
    </div>
    <div dom-region="tools" id="tools-panel">
     <awsdocs-tools-panel id="awsdocs-tools-panel">
     </awsdocs-tools-panel>
    </div>
   </awsui-app-layout>
   <awsdocs-cookie-banner class="doc-cookie-banner">
   </awsdocs-cookie-banner>
  </div>
 </body>
</html>
